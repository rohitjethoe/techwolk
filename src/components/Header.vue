<template>
    <header class="flex justify-between w-11/12 mx-auto items-center">
        <div>
            <router-link to="/">
                <svg width="80" height="80" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M41.3868 40.6L36.6828 63H32.2987L28.2028 46.328L24.1068 63H19.7228L15.0188 40.6H19.9148L22.3468 55.416L26.0268 40.6H30.3787L34.0588 55.416L36.4908 40.6H41.3868ZM50.8105 63.32C48.2292 63.32 46.2132 62.584 44.7625 61.112C43.3118 59.64 42.5865 57.6027 42.5865 55C42.5865 52.3973 43.3118 50.36 44.7625 48.888C46.2132 47.416 48.2292 46.68 50.8105 46.68C53.3918 46.68 55.4078 47.416 56.8585 48.888C58.3305 50.36 59.0665 52.3973 59.0665 55C59.0665 57.6027 58.3305 59.64 56.8585 61.112C55.4078 62.584 53.3918 63.32 50.8105 63.32ZM50.8105 60.28C52.1118 60.28 53.1358 59.8107 53.8825 58.872C54.6292 57.9333 55.0025 56.6427 55.0025 55C55.0025 53.3573 54.6292 52.0667 53.8825 51.128C53.1358 50.1893 52.1118 49.72 50.8105 49.72C49.5092 49.72 48.4852 50.1893 47.7385 51.128C47.0132 52.0667 46.6505 53.3573 46.6505 55C46.6505 56.6427 47.0132 57.9333 47.7385 58.872C48.4852 59.8107 49.5092 60.28 50.8105 60.28ZM66.1098 63.32C64.7444 63.32 63.6991 62.9573 62.9738 62.232C62.2698 61.4853 61.9178 60.4187 61.9178 59.032V39.256H65.9818V59.096C65.9818 59.5653 66.0991 59.9173 66.3338 60.152C66.5898 60.3653 66.9631 60.472 67.4538 60.472C67.9444 60.472 68.5524 60.3333 69.2778 60.056L69.8858 62.232C68.9258 62.9573 67.6671 63.32 66.1098 63.32ZM82.0708 63L77.3348 55.544L75.4148 57.432V63H71.3188V39.256H75.4148V52.536L81.0468 47H86.0708L80.1508 52.792L86.6788 63H82.0708Z" fill="black"/>
                <path d="M45.5421 44.08C45.1314 44.08 44.8114 43.968 44.5821 43.744C44.3527 43.52 44.2381 43.2053 44.2381 42.8V40.76H43.5101V40H44.2381V38.968L45.2301 38.68H45.2621V40H46.4221V40.76H45.2621V42.648C45.2621 42.8773 45.3154 43.0453 45.4221 43.152C45.5287 43.2587 45.6914 43.312 45.9101 43.312C46.1181 43.312 46.3127 43.28 46.4941 43.216L46.5421 43.912C46.3021 44.024 45.9687 44.08 45.5421 44.08ZM50.8614 42.376H48.0774C48.1628 42.9413 48.4908 43.224 49.0614 43.224C49.2961 43.224 49.4988 43.184 49.6694 43.104C49.8454 43.024 50.0161 42.8907 50.1814 42.704L50.7334 43.232C50.5788 43.488 50.3441 43.6933 50.0294 43.848C49.7201 44.0027 49.3788 44.08 49.0054 44.08C48.3814 44.08 47.8961 43.8987 47.5494 43.536C47.2028 43.168 47.0294 42.6613 47.0294 42.016C47.0294 41.3653 47.2028 40.8533 47.5494 40.48C47.9014 40.1067 48.3841 39.92 48.9974 39.92C49.5841 39.92 50.0401 40.104 50.3654 40.472C50.6961 40.84 50.8614 41.352 50.8614 42.008V42.376ZM49.8614 41.632C49.8614 41.36 49.7814 41.1467 49.6214 40.992C49.4668 40.832 49.2508 40.752 48.9734 40.752C48.7228 40.752 48.5201 40.8347 48.3654 41C48.2108 41.16 48.1121 41.3867 48.0694 41.68H49.8614V41.632ZM53.3174 44.08C52.6987 44.08 52.2107 43.896 51.8534 43.528C51.5014 43.1547 51.3254 42.6453 51.3254 42C51.3254 41.3493 51.5014 40.84 51.8534 40.472C52.2107 40.104 52.6987 39.92 53.3174 39.92C53.6907 39.92 54.016 39.9893 54.2934 40.128C54.5707 40.2667 54.784 40.464 54.9334 40.72L54.3174 41.256C54.216 41.08 54.08 40.944 53.9094 40.848C53.744 40.752 53.5627 40.704 53.3654 40.704C53.0454 40.704 52.7947 40.8187 52.6134 41.048C52.432 41.2773 52.3414 41.5947 52.3414 42C52.3414 42.4053 52.432 42.7227 52.6134 42.952C52.7947 43.1813 53.0454 43.296 53.3654 43.296C53.5627 43.296 53.744 43.248 53.9094 43.152C54.0747 43.0507 54.2107 42.9147 54.3174 42.744L54.9334 43.28C54.784 43.536 54.5707 43.7333 54.2934 43.872C54.016 44.0107 53.6907 44.08 53.3174 44.08ZM55.4309 38.064H56.4549V40.472C56.5775 40.3013 56.7482 40.168 56.9669 40.072C57.1909 39.9707 57.4335 39.92 57.6949 39.92C58.1482 39.92 58.5109 40.0693 58.7829 40.368C59.0602 40.6667 59.1989 41.0773 59.1989 41.6V44H58.1749V41.672C58.1749 41.3627 58.1082 41.12 57.9749 40.944C57.8415 40.768 57.6575 40.68 57.4229 40.68C57.1295 40.68 56.8949 40.784 56.7189 40.992C56.5429 41.1947 56.4549 41.472 56.4549 41.824V44H55.4309V38.064Z" fill="black"/>
                </svg>
            </router-link>
        </div>
        <div>
            <div @click="opened = !opened" class="hover:cursor-pointer">
                <svg width="22" height="26" viewBox="0 0 22 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="9" cy="9" r="8.5" stroke="#282828"/>
                <line x1="16.4069" y1="18.7094" x2="21.4069" y2="25.7094" stroke="#282828"/>
                </svg>
            </div>
        </div>
        <div 
        :class="opened ? 'block' : 'hidden'"
        class="fixed bg-[rgba(0,0,0,0.9)] w-screen h-screen top-0 left-0">
            <div class="w-11/12 mx-auto mt-8 flex justify-between">
                <input 
                @input="searchWordpress"
                class="border-px rounded px-4 py-2 text-lg" 
                v-model="query" 
                placeholder="Typ om te zoeken..." 
                type="text">
                <div @click="opened = !opened" class="hover:cursor-pointer px-2">
                    <div class="mr-3 flex">
                        <div class="bg-white h-8 w-[2px] -rotate-45 translate-x-px"></div>
                        <div class="bg-white h-8 w-[2px] rotate-45"></div>
                    </div>
                </div>
            </div>
            <div v-if="results" class="w-11/12 mx-auto my-12 text-white">
                <div class="my-6" v-for="result in results">
                    <a :href="`/artikel/${result.url.replace('https://rohit.nl/wordpress/', '')}`" class="text-xl hover:text-neonYellow">âœ¥ &nbsp;{{ result.title }}</a>
                </div>
            </div>
        </div>
    </header>
</template>

<script>
import debounce from 'lodash/debounce'

export default {
    name: 'Header',
    data() {
        return {
            opened: false,
            query: '',
            results: null
        }
    },
    methods: {
        searchWordpress: debounce(function () {
            if (this.query !== '') {
                fetch(`${import.meta.env.VITE_WP_ENDPOINT}/wp-json/wp/v2/search?search=${this.query}`)
                .then((res) => res.json())
                .then((data) => {
                    this.results = data;
                })
                .catch((err) => {
                    return;
                })
            } else {
                this.results = null
            }
        }, 300)
    }
}
</script>


